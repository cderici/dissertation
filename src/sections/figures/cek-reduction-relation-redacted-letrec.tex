%
%\begin{sidewaysfigure}[p]
%\begin{landscape}

  \begin{figure}[!h]
  \tiny
  \centering
  \fbox{%
    \begin{minipage}{\textwidth}
      \setlength{\jot}{2pt}
      \begin{align*}
%
        [\,v,\;\rho,\;\Sigma,\;((\operatorname{let-\kappa}\;()\;(x_{rhs}\;\ldots)\;(v_{rhs}\;\ldots)\;e_{body})\;\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{body},\;\operatorname{extend}(\rho,(x_{rhs}\;\ldots),(cell_{addr}\;\ldots)),\\
        &\hspace{7.6em}
          \operatorname{extend}(\Sigma,(cell_{addr}\;\ldots),(v\;v_{rhs}\;\ldots)),\;(\kappa\;\ldots)\,] \\
        &\hspace{1em}
          \where (cell_{addr}\;\ldots)=\operatorname{variables-not-in}(e_{body},(x_{rhs}\;\ldots))
        &&\textsc{[let‑plug]}\\[2pt]
%
        [\,v,\;\rho,\;\Sigma,\;((\operatorname{letrec-\kappa}\;()\;x_{prev}\;e_{body})\;\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{body},\;\rho,\;\operatorname{extend}(\Sigma,(\operatorname{lookup}(\rho,x_{prev})),(v)),\;(\kappa\;\ldots)\,]
        &&\textsc{[letrec‑plug]}\\[2pt]
%
        [\,(\operatorname{letrec-values}\;()\;e_{body}),\;\rho,\;\Sigma,\;(\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{body},\;\rho,\;\Sigma,\;(\kappa\;\ldots)\,]
        &&\textsc{[letrec‑no‑rhs]}\\[6pt]
%
% ───────────────────────────── let‑values (push / switch) ────────────────────────
        [\,v_{rhs},\;\rho,\;\Sigma,\;((\operatorname{let-\kappa}(((x_1)\,e_{rhs\_next})((x_2)\,e_2)\;\ldots)\\(x\;\ldots)\;(v\;\ldots)\;e_{body})\;\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{rhs\_next},\;\rho,\;\Sigma,\;((\operatorname{let-\kappa}(((x_2)\,e_2)\;\ldots)\\
        &\hspace{7.6em}
          (x_1\;x\;\ldots)\;(v_{rhs}\;v\;\ldots)\;e_{body})\;\kappa\;\ldots)\,]
        &&\textsc{[let‑rhs‑switch]}\\[2pt]
%
        [\,(let\!-\!values\ (((x_{rhs})\,e_{rhs})((x_2)\,e_2)\;\ldots)\ e_{body}),\;\rho,\;\Sigma,\;(\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{rhs},\;\rho,\;\Sigma,\;((\operatorname{let-\kappa}(((x_2)\,e_2)\;\ldots)(x_{rhs})()\;e_{body})\;\kappa\;\ldots)\,]
        &&\textsc{[let‑push]}\\[6pt]
%
% ─────────────────────────── letrec‑values (push / switch) ──────────────────────
        [\,v_{rhs},\;\rho,\;\Sigma,\;((\operatorname{letrec-\kappa}\\(((x_{rhs\_next})\,e_{rhs\_next})((x_{rhs\_rest})\,e_{rhs\_rest})\;\ldots)\\
                                       x_{prev}\;e_{body})\;\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{rhs\_next},\;\rho,\;\operatorname{extend}(\Sigma,(\operatorname{lookup}(\rho,x_{prev})),(v_{rhs})),\\
        &\hspace{7.6em}
          ((\operatorname{letrec-\kappa}(((x_{rhs\_rest})\,e_{rhs\_rest})\;\ldots)\;x_{rhs\_next}\;e_{body})\;\kappa\;\ldots)\,]
        &&\textsc{[letrec‑rhs‑switch]}\\[2pt]
%
        [\,(letrec\!-\!values\ (((x_{rhs})\,e_{rhs})((x_{rhs\_next})\,e_{rhs\_next})\;\ldots)\ e_{body}),\\ \rho,\;\Sigma,\;(\kappa\;\ldots)\,]
        &\;\longrightarrow_{\textit{cek}}\;
        [\,e_{rhs},\;
          \operatorname{extend}(\rho,(x_{rhs}\;x_{rhs\_next}\;\ldots),(cell_{addr}\;\ldots)),\;\Sigma,\\
        &\hspace{7.6em}
          ((\operatorname{letrec-\kappa}(((x_{rhs\_next})\,e_{rhs\_next})\;\ldots)\;x_{rhs}\;e_{body})\;\kappa\;\ldots)\,] \\
        &\hspace{1em}
          \where (cell_{addr}\;\ldots)=\operatorname{variables-not-in}(e_{body},(x_{rhs}\;x_{rhs\_next}\;\ldots))
        &&\textsc{[letrec‑push]}\\[6pt]
      \end{align*}
    \end{minipage}%
  }
  \vspace{0.6em}
  \caption{CEK Reduction Relation $;\longrightarrow_{\textit{cek}}$ Part II: Let/Letrec Rules}
  \label{fig:cek-reduction-relation-redacted-letrec}
\end{figure}
%\end{landscape}